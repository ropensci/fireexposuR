<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>communityscale • fireexposuR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="communityscale">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fireexposuR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/communityscale.html">communityscale</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/heyairf/fireexposuR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>communityscale</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/heyairf/fireexposuR/blob/main/vignettes/communityscale.Rmd" class="external-link"><code>vignettes/communityscale.Rmd</code></a></small>
      <div class="d-none name"><code>communityscale.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="usage-example">Usage example<a class="anchor" aria-label="anchor" href="#usage-example"></a>
</h2>
<p>This is a basic example which shows a workflow to assess wildfire
exposure to a community using multiple functions from the fireexposuR
package. The package automates the methods within various research
products which can be accessed through the following links:</p>
<ul>
<li><a href="https://doi.org/10.1071/WF09071" class="external-link">Beverly et
al. 2010</a></li>
<li><a href="https://doi.org/10.1007/s10980-020-01173-8" class="external-link">Beverly et
al. 2021</a></li>
<li><a href="https://doi.org/10.1007/s11069-023-05885-3" class="external-link">Beverly and
Forbes 2023</a></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heyairf/fireexposuR" class="external-link">fireexposuR</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="data-preperation">Data preperation<a class="anchor" aria-label="anchor" href="#data-preperation"></a>
</h3>
<p>First, some example data will be generated for an imaginary town:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; terra 1.7.83</span></span>
<span><span class="co"># read example hazard data ----------------------------------</span></span>
<span><span class="va">filepath</span> <span class="op">&lt;-</span> <span class="st">"extdata/hazard.tif"</span></span>
<span><span class="va">haz</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="va">filepath</span>, package <span class="op">=</span> <span class="st">"fireexposuR"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># read example AOI</span></span>
<span><span class="va">filepath</span> <span class="op">&lt;-</span> <span class="st">"extdata/builtsimpleexamplegeom.csv"</span></span>
<span><span class="va">g</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="va">filepath</span>, package <span class="op">=</span> <span class="st">"fireexposuR"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">aoi</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/vect.html" class="external-link">vect</a></span><span class="op">(</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/coerce.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">g</span><span class="op">)</span>, <span class="st">"polygons"</span>, crs <span class="op">=</span> <span class="va">haz</span><span class="op">)</span></span>
<span><span class="co"># generate random points</span></span>
<span><span class="va">pts</span> <span class="op">&lt;-</span> <span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/sample.html" class="external-link">spatSample</a></span><span class="op">(</span><span class="va">aoi</span>, <span class="fl">200</span><span class="op">)</span></span>
<span><span class="co">#' # ----------------------------------------------------------</span></span></code></pre></div>
<p>This example data represents the sort of data that would be
pre-prepared by a user for the assessment.</p>
<div class="section level4">
<h4 id="hazard-data">Hazard data<a class="anchor" aria-label="anchor" href="#hazard-data"></a>
</h4>
<p>The <code>haz</code> layer is a binary raster that represents
wildland fuels that are able to generate long-range embers up to a
transmission distance of 500 meters:</p>
<p><img src="communityscale_files/figure-html/hazardvis-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="area-of-interest-and-values-data">Area of interest and values data<a class="anchor" aria-label="anchor" href="#area-of-interest-and-values-data"></a>
</h4>
<p>The <code>aoi</code> layer is a polygon representing the built
environment of our imaginary town. The <code>pts</code> feature
represents the centroids of homes and structures within the
community.</p>
<p><img src="communityscale_files/figure-html/aoivis-1.png" width="700"></p>
</div>
</div>
<div class="section level3">
<h3 id="compute-exposure">Compute exposure<a class="anchor" aria-label="anchor" href="#compute-exposure"></a>
</h3>
<p>Now, we will use the hazard data to compute the exposure to
long-range ember transmission.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/heyairf/fireexposuR" class="external-link">fireexposuR</a></span><span class="op">)</span></span>
<span><span class="va">exp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fire_exp.html">fire_exp</a></span><span class="op">(</span><span class="va">haz</span>, tdist <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</span></span>
<span><span class="co">#&gt; Warning: 'rgl.init' failed, running with 'rgl.useNULL = TRUE'.</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="visualize-exposure">Visualize exposure<a class="anchor" aria-label="anchor" href="#visualize-exposure"></a>
</h3>
<p>Once we have an exposure raster the rest of the package functions can
be used to visualize it in different ways. For a landscape, we can map
exposure with a continuous scale with
<code><a href="../reference/fire_exp_map_cont.html">fire_exp_map_cont()</a></code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fire_exp_map_cont.html">fire_exp_map_cont</a></span><span class="op">(</span><span class="va">exp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">&lt;SpatRaster&gt;</span> resampled to <span style="color: #00BB00;">501264</span> cells.</span></span></code></pre></div>
<p><img src="communityscale_files/figure-html/maplandscape-1.png" width="700"></p>
<p>We can also see how that exposure is distributed within the built
environment with exposure classifications in an area of interest with
<code><a href="../reference/fire_exp_map_class.html">fire_exp_map_class()</a></code>.</p>
<p><em>Note: our imaginary town is in the middle of the Pacific Ocean so
the base map does not provide further reference.</em></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fire_exp_map_class.html">fire_exp_map_class</a></span><span class="op">(</span><span class="va">exp</span>, classify <span class="op">=</span> <span class="st">"local"</span>, <span class="va">aoi</span><span class="op">)</span></span></code></pre></div>
<p><img src="communityscale_files/figure-html/maplocal-1.png" width="700"></p>
<p>This map gives us a better understanding of areas of the town that
could be fire entry points. We can also summarize the area with
<code><a href="../reference/fire_exp_summary.html">fire_exp_summary()</a></code> if we want to know the proportional
distributions of each class.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/fire_exp_summary.html">fire_exp_summary</a></span><span class="op">(</span><span class="va">exp</span>, classify <span class="op">=</span> <span class="st">"local"</span>, <span class="va">aoi</span><span class="op">)</span></span>
<span><span class="co">#&gt;      class npixels       prop  aream2 areaha</span></span>
<span><span class="co">#&gt; 1      Nil     595 0.70749108 5950000    595</span></span>
<span><span class="co">#&gt; 2      Low      90 0.10701546  900000     90</span></span>
<span><span class="co">#&gt; 3 Moderate      54 0.06420927  540000     54</span></span>
<span><span class="co">#&gt; 4     High      58 0.06896552  580000     58</span></span>
<span><span class="co">#&gt; 5  Extreme      44 0.05231867  440000     44</span></span></code></pre></div>
<p>We also have data for the values within the built environment, for
which we can map or summarize in a table as well.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># extract exposure to the values feature</span></span>
<span><span class="va">vals_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fire_exp_extract.html">fire_exp_extract</a></span><span class="op">(</span><span class="va">exp</span>, <span class="va">pts</span><span class="op">)</span></span>
<span><span class="co"># summary table </span></span>
<span><span class="fu"><a href="../reference/fire_exp_extract_vis.html">fire_exp_extract_vis</a></span><span class="op">(</span><span class="va">vals_ext</span>, classify <span class="op">=</span> <span class="st">"local"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   scale method    class   n  prop</span></span>
<span><span class="co">#&gt; 1 local  Point      Nil 144 0.720</span></span>
<span><span class="co">#&gt; 2 local  Point      Low  21 0.105</span></span>
<span><span class="co">#&gt; 3 local  Point Moderate  12 0.060</span></span>
<span><span class="co">#&gt; 4 local  Point     High  13 0.065</span></span>
<span><span class="co">#&gt; 5 local  Point  Extreme  10 0.050</span></span>
<span></span>
<span><span class="co"># map</span></span>
<span><span class="fu"><a href="../reference/fire_exp_extract_vis.html">fire_exp_extract_vis</a></span><span class="op">(</span><span class="va">vals_ext</span>, classify <span class="op">=</span> <span class="st">"local"</span>, map <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p><img src="communityscale_files/figure-html/mapvalues-1.png" width="700"></p>
<p>With this information, the community has now identified 12 structures
that are extremely exposed to long-range embers from the landscape in
the northwest of the community. This could be a potential area to
prioritize wildfire mitigation strategies.</p>
<div class="section level4">
<h4 id="directional-vulnerability">Directional vulnerability<a class="anchor" aria-label="anchor" href="#directional-vulnerability"></a>
</h4>
<p>Our make believe town may also wish to assess the directional
vulnerability to wildfire towards their community. This assessment
identifies linear pathways of exposure from the landscape toward a
value.</p>
<p><em>Note: our imaginary town is in the middle of the Pacific Ocean so
the base map does not provide further reference.</em></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">transects</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fire_exp_dir.html">fire_exp_dir</a></span><span class="op">(</span><span class="va">exp</span>, <span class="va">aoi</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/fire_exp_dir_plot.html">fire_exp_dir_plot</a></span><span class="op">(</span><span class="va">transects</span>, <span class="va">aoi</span>, map <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">&lt;SpatRaster&gt;</span> resampled to <span style="color: #00BB00;">501120</span> cells.</span></span></code></pre></div>
<p><img src="communityscale_files/figure-html/mapdir-1.png" width="700"></p>
<p>Now we can see that although the northwest corner of the town is a
potential entry point, the pathway to that location is only viable from
5 kilometers out. The southeast pathway might be a more concerning
pathway because it covers the full 15 kilometers. Depending on local
knowledge, this assessment could identify further areas of concern. For
example, if the region has consistent patterns of southwest winds it may
be a priority area for fuel reduction treatments. Or perhaps there is a
popular outdoor recreation area to the northwest close to the community,
in which case the shorter pathway might be more of a concern if there is
increased human ignition potential in that area.</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Air Forbes, Jennifer Beverly.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
